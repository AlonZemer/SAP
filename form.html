<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>Insert title here</title>
 <link rel="stylesheet" href="listbox.css">
 <script src="list.js" type="text/javascript"></script>
 <style>
  .column1 {
  float: left;
  width: 50%;
}

/* Clear floats after the columns */
.row:after {
  content: "";
  display: table;
  clear: both;
}
</style>
<script>

function UserAction(url_param) {
	
    var xhttp = new XMLHttpRequest();


    xhttp.onreadystatechange = function() {
         if (this.readyState == 4 && this.status == 200) {
        	 
        	 let data = this.responseText.split("\n\t");
        	 let count = 0
        	 let list = document.getElementById("ss_elem_list");
        	  
        	 data.forEach((item)=>{
        	   let li = document.createElement("li");
        	   li.id = "ss_elem_" + count
        	   li.role="option"
        	   li.onclick=function(){ 
        		   
        		   var xhttp = new XMLHttpRequest();

        		    xhttp.onreadystatechange = function() {
        		         if (this.readyState == 4 && this.status == 200) {
        		        	 
        		        	 var obj = JSON.parse(this.responseText);
        		        	 
        		        	 let div = document.getElementById("coin_detail");
        		        	 
        		        	 div.innerText = "\n" + obj.symbol +" $"+ obj.toUSD + 
        		        	                 "\n Id: " + obj.Id  +
        		        	                 "\n" + obj.coinName +
        		        	                 "\n" + obj.algorithm;
        		        }
        		    };
        		    xhttp.open("GET", "/apiproxy/rest/coins/:" + item.split("=")[1], true);
        		    xhttp.setRequestHeader("Content-type", "application/json");
        		    xhttp.send("Your JSON Data Here");
        	    };
        	   
        	   li.innerText = item.split("=")[0];
        	   list.appendChild(li);
        	   count = count+1;
        	 })
        	
         }
    };
    xhttp.open("GET", url_param, true);
    xhttp.setRequestHeader("Content-type", "text/plain");
    xhttp.send("Your JSON Data Here");
}

function getCoinForSymbol(url_param){
	
	var xhttp = new XMLHttpRequest();

    xhttp.onreadystatechange = function() {
         if (this.readyState == 4 && this.status == 200) {
        	 
        	 var obj = JSON.parse(this.responseText);
        	 
        	 let div = document.getElementById("coin_detail");
        	 
        	 div.innerText = "\n" + obj.symbol +" $"+ obj.toUSD + 
        	                 "\n Id: " + obj.Id  +
        	                 "\n" + obj.coinName +
        	                 "\n" + obj.algorithm;
        }
    };
    xhttp.open("GET", url_param, true);
    xhttp.setRequestHeader("Content-type", "application/json");
    xhttp.send("Your JSON Data Here");
	
}

UserAction("/apiproxy/rest/coins");

 // getCoinForSymbol("/apiproxy/rest/coins/:BTC");
 //apiproxy/rest/coins?algorithm=SHA-256


</script>
</head>
<body>



<p>MASTER/DETAIL VIEW</p>
<div class="listbox-area">
   <div class="row">
    <div class="column1">
    <span id="ss_elem" class="listbox-label">Search by: symbol/algorithm</span>
    <input type="text" id="fname" name="fname">
     <ul id="ss_elem_list" tabindex="0" role="listbox" aria-labelledby="ss_elem">
     </ul>
   
   </div>
   
  </div>
  
   <div id="coin_detail">
   </div>
   
 </div>
</body>
</html>